###################################################
#                                                 #
#     NEW DASHBOARD FOR SCREEN IN KITCHEN         #
#                                                 #
###################################################

title: Dashboard
id: dashboard
icon: mdi:monitor-dashboard
panel: true
path: dashboard

cards:

  - type: custom:layout-card
    layout: vertical
    max_width: [30%, 35%, 35%]
    cards:
      - type: horizontal-stack
        cards:
          - type: custom:decluttering-card
            template: tracking_picture_button
            variables:
              - entity: device_tracker.life360_greg
              - entity_picture_away: /local/images/Greg-Away.jpg
              - entity_picture_home: /local/images/Greg-Home.jpg
          - type: custom:decluttering-card
            template: tracking_picture_button
            variables:
              - entity: device_tracker.life360_jenny
              - entity_picture_away: /local/images/Jenny-Away.jpg
              - entity_picture_home: /local/images/Jenny-Home.jpg
          - type: custom:decluttering-card
            template: tracking_picture_button
            variables:
              - entity: device_tracker.life360_lynne
              - entity_picture_away: /local/images/Lynne-Away.png
              - entity_picture_home: /local/images/Lynne-Home.png
          - type: custom:decluttering-card
            template: tracking_picture_button
            variables:
              - entity: device_tracker.life360_sally
              - entity_picture_away: /local/images/Sally-Away.png
              - entity_picture_home: /local/images/Sally-Home.png

      - type: picture-elements    
        image: /local/images/clock-bg-trans.png
        elements:      
          - type: state-label
            entity: sensor.time
            style:
              top: 40%
              left: 50%
              font-size: 4vw
              color: white

          - type: state-label
            entity: sensor.date
            style:
              top: 80%
              left: 50%
              font-size: 1.5vw
              color: CornflowerBlue

        style: |
          ha-card {
            margin-top: 40px;
            margin-bottom: 30px;
            background-color: rgba(0, 0, 0, 0);
            font-family: 'Open Sans', sans-serif;
            font-size: 200%;
            -webkit-box-shadow: none;
            -moz-box-shadow: none;
            box-shadow: none;
            text-align: center;
          }
          h1, h3 {
            font-weight: 300 !important;
          }


      - type: "custom:atomic-calendar"
        title: "Upcoming Events"
        titleSize: 110
        dateSize: 80
        timeSize: 80
        locationTextSize: 80
        entities:           
        - entity: calendar.greg_personal_gmail
          color: dodgerblue
        - entity: calendar.wrench_jenny_gmail_com
          color: darkorange
        - entity: calendar.sarah_personal
          color: pink
        - entity: calendar.holidays_in_south_africa
          color: green
        - entity: calendar.meal_plan
          color: MediumOrchid
        - entity: calendar.family
          color: HotPink
        locationIconColor: rgb(230, 124, 115)
        timeColor: silver
        showProgressBar: false
        style: |
          ha-card {
            background-color: rgba(0, 0, 0, 0);
            -webkit-box-shadow: none;
            -moz-box-shadow: none;
            box-shadow: none;
          }

      - break

      - type: custom:weather-card
        entity: weather.dark_sky
        icons: "/local/custom-lovelace/weather-card/icons/"
        style: |
          ha-card {
            background-color: rgba(0, 0, 0, 0);
            -webkit-box-shadow: none;
            -moz-box-shadow: none;
            box-shadow: none;
          }


      - type: horizontal-stack
        cards:
          - type: "custom:keep-notes-card"
            entity: sensor.keep_shopping_list
            showChecked: false
          # - type: "custom:google-keep-card"
          #   entity: sensor.google_keep_c6fe53a582
          #   theme: dark
          #   show:
          #     - unchecked
            # style: |
            #   ha-card {
            #     background-color: rgba(0, 0, 0, 0);
            #     -webkit-box-shadow: none;
            #     -moz-box-shadow: none;
            #     box-shadow: none;
            #   }


          - type: vertical-stack
            cards:

              - type: horizontal-stack
                cards:

                  - type: custom:mini-graph-card
                    name: Outside
                    entities: 
                      - sensor.outside_temperature
                    show:
                      extrema: true
                      icon_adaptive_color: true
                      graph: bar
                    points_per_hour: 2
                    color_thresholds:
                      - value: -50
                        color: "#FFFFFF"
                      - value: 0
                        color: "#1E90FF"
                      - value: 18
                        color: "#008000"
                      - value: 28
                        color: "#FFFF00"
                      - value: 31
                        color: "#FF8C00"
                      - value: 35
                        color: "#FF0000"

                  - type: custom:mini-graph-card
                    name: Pool
                    entities: 
                      - sensor.pool_temperature
                    show:
                      extrema: true
                      icon_adaptive_color: true
                      graph: bar
                    points_per_hour: 2
                    color_thresholds:
                      - value: -50
                        color: "#FFFFFF"
                      - value: 0
                        color: "#1E90FF"
                      - value: 27
                        color: "#008000"
                      - value: 32
                        color: "#FF8C00"
                      - value: 100
                        color: "#FF0000"
              - type: horizontal-stack
                cards:
                  - type: custom:mini-graph-card
                    name: Lounge
                    entities: 
                      - sensor.lounge_temperature
                    show:
                      # extrema: true
                      icon_adaptive_color: true
                      icon: false
                      graph: bar
                    points_per_hour: 2
                    color_thresholds:
                      - value: -50
                        color: "#FFFFFF"
                      - value: 0
                        color: "#1E90FF"
                      - value: 18
                        color: "#008000"
                      - value: 28
                        color: "#FFFF00"
                      - value: 31
                        color: "#FF8C00"
                      - value: 35
                        color: "#FF0000"

                  - type: custom:mini-graph-card
                    Name: Main Bedroom
                    entities: 
                      - sensor.main_bedroom_temperature
                    show:
                      # extrema: true
                      icon_adaptive_color: true
                      icon: false
                      graph: bar
                    points_per_hour: 2
                    color_thresholds:
                      - value: -50
                        color: "#FFFFFF"
                      - value: 0
                        color: "#1E90FF"
                      - value: 18
                        color: "#008000"
                      - value: 28
                        color: "#FFFF00"
                      - value: 31
                        color: "#FF8C00"
                      - value: 35
                        color: "#FF0000"

              - type: horizontal-stack
                cards:

                  - type: custom:mini-graph-card
                    name: Nursery
                    entities: 
                      - sensor.nursery_temperature
                    show:
                      # extrema: true
                      icon_adaptive_color: true
                      icon: false
                      graph: bar
                    points_per_hour: 2
                    color_thresholds:
                      - value: -50
                        color: "#FFFFFF"
                      - value: 0
                        color: "#1E90FF"
                      - value: 18
                        color: "#008000"
                      - value: 28
                        color: "#FFFF00"
                      - value: 31
                        color: "#FF8C00"
                      - value: 35
                        color: "#FF0000"

                  - type: custom:mini-graph-card
                    name: Flat
                    entities: 
                      - sensor.flat_bedroom_temperature
                    show:
                      # extrema: true
                      icon_adaptive_color: true
                      icon: false
                      graph: bar
                    points_per_hour: 2
                    color_thresholds:
                      - value: -50
                        color: "#FFFFFF"
                      - value: 0
                        color: "#1E90FF"
                      - value: 18
                        color: "#008000"
                      - value: 28
                        color: "#FFFF00"
                      - value: 31
                        color: "#FF8C00"
                      - value: 35
                        color: "#FF0000"
              - type: horizontal-stack
                cards:
                  - type: custom:mini-graph-card
                    name: Kitchen
                    entities: 
                      - sensor.kitchen_temperature
                    show:
                      # extrema: true
                      icon_adaptive_color: true
                      icon: false
                      graph: bar
                    points_per_hour: 2
                    color_thresholds:
                      - value: -50
                        color: "#FFFFFF"
                      - value: 0
                        color: "#1E90FF"
                      - value: 18
                        color: "#008000"
                      - value: 28
                        color: "#FFFF00"
                      - value: 31
                        color: "#FF8C00"
                      - value: 35
                        color: "#FF0000"
                  - type: custom:mini-graph-card
                    name: Pi
                    entities: 
                      - sensor.kitchen_pi_temp
                    show:
                      # extrema: true
                      icon_adaptive_color: true
                      icon: false
                      graph: bar
                    points_per_hour: 2
                    color_thresholds:
                      - value: -50
                        color: "#FFFFFF"
                      - value: 0
                        color: "#1E90FF"
                      - value: 18
                        color: "#008000"
                      - value: 60
                        color: "#FFFF00"
                      - value: 70
                        color: "#FF8C00"
                      - value: 80
                        color: "#FF0000"






              
      - break

      - type: picture-entity
        entity: camera.driveway_gate
        camera_view: live

      - type: horizontal-stack
        cards:
          - type: vertical-stack
            cards:
              - type: horizontal-stack
                cards:
                  - type: "custom:button-card"
                    entity: binary_sensor.driveway_gate
                    template: homekit-button
                    icon: mdi:gate
                    state:
                      - value: 'on'
                        color: Red
                      - value: 'Closed'
                        color: Green
                  - type: "custom:button-card"
                    entity: binary_sensor.pool_gate
                    template: homekit-button
                    icon: mdi:gate
                    state:
                      - value: 'on'
                        color: Red
                  - type: custom:button-card
                    entity: switch.pool_pump
                    template: homekit-button
                    state:
                      - value: 'on'
                        color: CornflowerBlue
              - type: horizontal-stack
                cards:
                  - type: "custom:button-card"
                    entity: binary_sensor.front_door
                    template: homekit-button
                    icon: mdi:door-closed
                    state:
                      - value: 'on'
                        color: Red
                        icon: mdi:door-open
                  - type: "custom:button-card"
                    entity: binary_sensor.kitchen_door
                    template: homekit-button
                    icon: mdi:door-closed
                    state:
                      - value: 'on'
                        color: Red
                        icon: mdi:door-open
                  - type: "custom:button-card"
                    entity: binary_sensor.bedroom_french_door
                    template: homekit-button
                    icon: mdi:door-closed
                    state:
                      - value: 'on'
                        color: Red
                        icon: mdi:door-open
              - type: horizontal-stack
                cards:
                  - type: "custom:button-card"
                    entity: switch.nursery_heater
                    template: homekit-button
                    state:
                      - value: 'on'
                        color: Orange
                  - type: "custom:button-card"
                    entity: switch.flat_bedroom_heater
                    name: Flat Heater
                    template: homekit-button
                    state:
                      - value: 'on'
                        color: Orange
                  - type: custom:button-card
                    color_type: blank-card

              - type: horizontal-stack
                cards:
                  - type: custom:button-card
                    template: homekit-button
                    name: Lounge Fan 1
                    entity: fan.lounge_fan_1
                    show_label: true
                    tap_action:
                      action: call-service
                      service: fan.set_speed
                      service_data:
                        entity_id: fan.lounge_fan_1
                        speed: off
                    icon: mdi:fan-off    
                    state: 
                      - operator: template
                        value: >
                          [[[
                            return states['fan.lounge_fan_1'].attributes
                            && (states['fan.lounge_fan_1'].attributes.speed === 'low')
                          ]]]
                        icon: mdi:fan
                        color: CornflowerBlue
                        # spin: true
                        label: Low           
                      - operator: template
                        value: >
                          [[[
                            return states['fan.lounge_fan_1'].attributes
                            && (states['fan.lounge_fan_1'].attributes.speed === 'medium')
                          ]]]
                        icon: mdi:fan
                        color: CornflowerBlue
                        # spin: true
                        label: Medium
                
                      - operator: template
                        value: >
                          [[[
                            return states['fan.lounge_fan_1'].attributes
                            && (states['fan.lounge_fan_1'].attributes.speed === 'high')
                          ]]]
                        icon: mdi:fan
                        color: CornflowerBlue
                        # spin: true
                        label: High
                  - type: custom:button-card
                    template: homekit-button
                    name: Lounge Fan 2
                    entity: fan.lounge_fan_2
                    show_label: true
                    tap_action:
                      action: call-service
                      service: fan.set_speed
                      service_data:
                        entity_id: fan.lounge_fan_2
                        speed: off
                    icon: mdi:fan-off    
                    state: 
                      - operator: template
                        value: >
                          [[[
                            return states['fan.lounge_fan_2'].attributes
                            && (states['fan.lounge_fan_2'].attributes.speed === 'low')
                          ]]]
                        icon: mdi:fan
                        color: CornflowerBlue
                        # spin: true
                        label: Low           
                      - operator: template
                        value: >
                          [[[
                            return states['fan.lounge_fan_2'].attributes
                            && (states['fan.lounge_fan_2'].attributes.speed === 'medium')
                          ]]]
                        icon: mdi:fan
                        color: CornflowerBlue
                        # spin: true
                        label: Medium
                
                      - operator: template
                        value: >
                          [[[
                            return states['fan.lounge_fan_2'].attributes
                            && (states['fan.lounge_fan_2'].attributes.speed === 'high')
                          ]]]
                        icon: mdi:fan
                        color: CornflowerBlue
                        # spin: true
                        label: High
                  - type: custom:button-card
                    template: homekit-button
                    name: Kitchen Fan
                    entity: fan.kitchen_fan
                    show_label: true
                    tap_action:
                      action: call-service
                      service: fan.set_speed
                      service_data:
                        entity_id: fan.kitchen_fan
                        speed: off
                    icon: mdi:fan-off    
                    state: 
                      - operator: template
                        value: >
                          [[[
                            return states['fan.kitchen_fan'].attributes
                            && (states['fan.kitchen_fan'].attributes.speed === 'low')
                          ]]]
                        icon: mdi:fan
                        color: CornflowerBlue
                        # spin: true
                        label: Low           
                      - operator: template
                        value: >
                          [[[
                            return states['fan.kitchen_fan'].attributes
                            && (states['fan.kitchen_fan'].attributes.speed === 'medium')
                          ]]]
                        icon: mdi:fan
                        color: CornflowerBlue
                        # spin: true
                        label: Medium
                
                      - operator: template
                        value: >
                          [[[
                            return states['fan.kitchen_fan'].attributes
                            && (states['fan.kitchen_fan'].attributes.speed === 'high')
                          ]]]
                        icon: mdi:fan
                        color: CornflowerBlue
                        # spin: true
                        label: High



              - type: horizontal-stack
                cards:
                  - type: custom:button-card
                    template: homekit-button
                    name: Main Bedroom Fan
                    entity: fan.main_bedroom_fan
                    show_label: true
                    tap_action:
                      action: call-service
                      service: fan.set_speed
                      service_data:
                        entity_id: fan.main_bedroom_fan
                        speed: off
                    icon: mdi:fan-off    
                    state: 
                      - operator: template
                        value: >
                          [[[
                            return states['fan.main_bedroom_fan'].attributes
                            && (states['fan.main_bedroom_fan'].attributes.speed === 'low')
                          ]]]
                        icon: mdi:fan
                        color: CornflowerBlue
                        spin: true
                        label: Low
                        # tap_action:
                        #   action: call-service
                        #   service: fan.set_speed
                        #   service_data:
                        #     entity_id: fan.main_bedroom_fan
                        #     speed: medium
                  
                      - operator: template
                        value: >
                          [[[
                            return states['fan.main_bedroom_fan'].attributes
                            && (states['fan.main_bedroom_fan'].attributes.speed === 'medium')
                          ]]]
                        icon: mdi:fan
                        color: CornflowerBlue
                        spin: true
                        label: Medium
                
                      - operator: template
                        value: >
                          [[[
                            return states['fan.main_bedroom_fan'].attributes
                            && (states['fan.main_bedroom_fan'].attributes.speed === 'high')
                          ]]]
                        icon: mdi:fan
                        color: CornflowerBlue
                        spin: true
                        label: High
                  - type: custom:button-card
                    template: homekit-button
                    name: Nursery Fan
                    entity: fan.nursery_fan
                    show_label: true
                    tap_action:
                      action: call-service
                      service: fan.set_speed
                      service_data:
                        entity_id: fan.nursery_fan
                        speed: off
                    icon: mdi:fan-off    
                    state: 
                      - operator: template
                        value: >
                          [[[
                            return states['fan.nursery_fan'].attributes
                            && (states['fan.nursery_fan'].attributes.speed === 'low')
                          ]]]
                        icon: mdi:fan
                        color: CornflowerBlue
                        # spin: true
                        label: Low           
                      - operator: template
                        value: >
                          [[[
                            return states['fan.nursery_fan'].attributes
                            && (states['fan.nursery_fan'].attributes.speed === 'medium')
                          ]]]
                        icon: mdi:fan
                        color: CornflowerBlue
                        # spin: true
                        label: Medium
                
                      - operator: template
                        value: >
                          [[[
                            return states['fan.nursery_fan'].attributes
                            && (states['fan.nursery_fan'].attributes.speed === 'high')
                          ]]]
                        icon: mdi:fan
                        color: CornflowerBlue
                        # spin: true
                        label: High
                  - type: custom:button-card
                    color_type: blank-card

          - type: vertical-stack
            cards:
              - type: horizontal-stack
                cards:
                  - type: custom:button-card
                    entity: light.all_outside_lights
                    template: homekit-button
                  - type: "custom:button-card"
                    entity: light.desk_lamp
                    template: homekit-button
                  - type: "custom:button-card"
                    entity: light.tv_led
                    template: homekit-button
                    state:
                      - value: 'on'
                        color: auto 

              - type: horizontal-stack
                cards:
                  - type: "custom:button-card"
                    entity: light.lounge_light_1
                    template: homekit-button
                  - type: "custom:button-card"
                    entity: light.lounge_light_2
                    template: homekit-button
                  - type: "custom:button-card"
                    entity: light.lounge_lamp
                    template: homekit-button

              - type: horizontal-stack
                cards:
                  - type: "custom:button-card"
                    entity: light.main_bedroom_light
                    template: homekit-button
                  - type: custom:button-card
                    color_type: blank-card
                  - type: custom:button-card
                    color_type: blank-card

              - type: horizontal-stack
                cards:
                  - type: "custom:button-card"
                    entity: light.nursery_light
                    template: homekit-button
                  - type: "custom:button-card"
                    entity: light.nursery_lamp
                    template: homekit-button
                  - type: "custom:button-card"
                    entity: light.nursery_led
                    template: homekit-button
                    state:
                      - value: 'on'
                        color: auto 
                    tap_action:
                      action: more-info


              - type: horizontal-stack
                cards:
                  - type: "custom:button-card"
                    entity: light.kitchen_light
                    template: homekit-button
                  - type: "custom:button-card"
                    entity: light.kitchen_led
                    template: homekit-button
                    state:
                      - value: 'on'
                        color: white
                  - type: custom:button-card
                    color_type: blank-card
