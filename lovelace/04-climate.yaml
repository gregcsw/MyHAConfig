#################################
#                               #
#           CLIMATE             #
#                               #
#################################

title: Climate
id: climate
icon: mdi:thermometer
cards:


  - type: vertical-stack
    cards:

      - type: horizontal-stack
        cards:
          - type: custom:button-card
            template: homekit-button
            name: Power
            entity: script.lounge_heater_power
            action: service
            service: script.turn_on
            data:
              entity_id: script.lounge_heater_power
            icon: mdi:power
            color_type: card
            state:
              - value: "off"
                color: red

          - type: custom:button-card
            template: homekit-button
            name: 1000W
            entity: script.lounge_heater_turn_on_1000w
            action: service
            service: script.turn_on
            data:
              entity_id: script.lounge_heater_turn_on_1000w
            icon: mdi:numeric-1-box
            color_type: card
            state:
              - value: "off"
                color: black

          - type: custom:button-card
            template: homekit-button
            name: 2000W
            entity: script.lounge_heater_turn_on_1000w
            action: service
            service: script.turn_on
            data:
              entity_id: script.lounge_heater_turn_on_1000w
            icon: mdi:numeric-2-box
            color_type: card
            state:
              - value: "off"
                color: black

      - type: horizontal-stack
        cards:
          - type: "custom:button-card"
            entity: switch.nursery_heater
            template: homekit-button
            state:
              - value: 'on'
                color: Orange
          - type: "custom:button-card"
            entity: switch.flat_bedroom_heater
            name: Flat Heater
            template: homekit-button
            state:
              - value: 'on'
                color: Orange
          - type: custom:button-card
            color_type: blank-card

      - type: horizontal-stack
        cards:

          - type: custom:button-card
            template: homekit-button
            name: Lounge Fan 1
            entity: fan.lounge_fan_1
            tap_action:
              action: call-service
              service: fan.set_speed
              service_data:
                entity_id: fan.lounge_fan_1
                speed: off
            icon: mdi:fan-off
            color: CornflowerBlue
          - type: custom:button-card
            template: homekit-button
            name: Lounge Fan 1
            entity: fan.lounge_fan_1
            tap_action:
              action: call-service
              service: fan.set_speed
              service_data:
                entity_id: fan.lounge_fan_1
                speed: low
            icon: mdi:numeric-1
            color: CornflowerBlue
            state: 
              - operator: template
                value: >
                  [[[
                    return states['fan.lounge_fan_1'].attributes
                    && (states['fan.lounge_fan_1'].attributes.speed === 'low')
                  ]]]
                icon: mdi:fan
                color: CornflowerBlue
                spin: true
          - type: custom:button-card
            template: homekit-button
            name: Lounge Fan 1
            entity: fan.lounge_fan_1
            tap_action:
              action: call-service
              service: fan.set_speed
              service_data:
                entity_id: fan.lounge_fan_1
                speed: medium
            icon: mdi:numeric-2
            color: CornflowerBlue
            state: 
              - operator: template
                value: >
                  [[[
                    return states['fan.lounge_fan_1'].attributes
                    && (states['fan.lounge_fan_1'].attributes.speed === 'medium')
                  ]]]
                icon: mdi:fan
                color: CornflowerBlue
                spin: true
          - type: custom:button-card
            template: homekit-button
            name: Lounge Fan 1
            entity: fan.lounge_fan_1
            tap_action:
              action: call-service
              service: fan.set_speed
              service_data:
                entity_id: fan.lounge_fan_1
                speed: high
            icon: mdi:numeric-3
            color: CornflowerBlue
            state: 
              - operator: template
                value: >
                  [[[
                    return states['fan.lounge_fan_1'].attributes
                    && (states['fan.lounge_fan_1'].attributes.speed === 'high')
                  ]]]
                icon: mdi:fan
                color: CornflowerBlue
                spin: true


      - type: horizontal-stack
        cards:

          - type: custom:button-card
            template: homekit-button
            name: Lounge Fan 2
            entity: fan.lounge_fan_2
            tap_action:
              action: call-service
              service: fan.set_speed
              service_data:
                entity_id: fan.lounge_fan_2
                speed: off
            icon: mdi:fan-off
            color: CornflowerBlue
          - type: custom:button-card
            template: homekit-button
            name: Lounge Fan 2
            entity: fan.lounge_fan_2
            tap_action:
              action: call-service
              service: fan.set_speed
              service_data:
                entity_id: fan.lounge_fan_2
                speed: low
            icon: mdi:numeric-1
            color: CornflowerBlue
            state: 
              - operator: template
                value: >
                  [[[
                    return states['fan.lounge_fan_2'].attributes
                    && (states['fan.lounge_fan_2'].attributes.speed === 'low')
                  ]]]
                icon: mdi:fan
                color: CornflowerBlue
                spin: true
          - type: custom:button-card
            template: homekit-button
            name: Lounge Fan 2
            entity: fan.lounge_fan_2
            tap_action:
              action: call-service
              service: fan.set_speed
              service_data:
                entity_id: fan.lounge_fan_2
                speed: medium
            icon: mdi:numeric-2
            color: CornflowerBlue
            state: 
              - operator: template
                value: >
                  [[[
                    return states['fan.lounge_fan_2'].attributes
                    && (states['fan.lounge_fan_2'].attributes.speed === 'medium')
                  ]]]
                icon: mdi:fan
                color: CornflowerBlue
                spin: true
          - type: custom:button-card
            template: homekit-button
            name: Lounge Fan 2
            entity: fan.lounge_fan_2
            tap_action:
              action: call-service
              service: fan.set_speed
              service_data:
                entity_id: fan.lounge_fan_2
                speed: high
            icon: mdi:numeric-3
            color: CornflowerBlue
            state: 
              - operator: template
                value: >
                  [[[
                    return states['fan.lounge_fan_2'].attributes
                    && (states['fan.lounge_fan_2'].attributes.speed === 'high')
                  ]]]
                icon: mdi:fan
                color: CornflowerBlue
                spin: true



      - type: horizontal-stack
        cards:

          - type: custom:button-card
            template: homekit-button
            name: Main Bedroom Fan
            entity: fan.main_bedroom_fan
            tap_action:
              action: call-service
              service: fan.set_speed
              service_data:
                entity_id: fan.main_bedroom_fan
                speed: off
            icon: mdi:fan-off
            color: CornflowerBlue
          - type: custom:button-card
            template: homekit-button
            name: Main Bedroom Fan
            entity: fan.main_bedroom_fan
            tap_action:
              action: call-service
              service: fan.set_speed
              service_data:
                entity_id: fan.main_bedroom_fan
                speed: low
            icon: mdi:numeric-1
            color: CornflowerBlue
            state: 
              - operator: template
                value: >
                  [[[
                    return states['fan.main_bedroom_fan'].attributes
                    && (states['fan.main_bedroom_fan'].attributes.speed === 'low')
                  ]]]
                icon: mdi:fan
                color: CornflowerBlue
                spin: true
          - type: custom:button-card
            template: homekit-button
            name: Main Bedroom Fan
            entity: fan.main_bedroom_fan
            tap_action:
              action: call-service
              service: fan.set_speed
              service_data:
                entity_id: fan.main_bedroom_fan
                speed: medium
            icon: mdi:numeric-2
            color: CornflowerBlue
            state: 
              - operator: template
                value: >
                  [[[
                    return states['fan.main_bedroom_fan'].attributes
                    && (states['fan.main_bedroom_fan'].attributes.speed === 'medium')
                  ]]]
                icon: mdi:fan
                color: CornflowerBlue
                spin: true
          - type: custom:button-card
            template: homekit-button
            name: Main Bedroom Fan
            entity: fan.main_bedroom_fan
            tap_action:
              action: call-service
              service: fan.set_speed
              service_data:
                entity_id: fan.main_bedroom_fan
                speed: high
            icon: mdi:numeric-3
            color: CornflowerBlue
            state: 
              - operator: template
                value: >
                  [[[
                    return states['fan.main_bedroom_fan'].attributes
                    && (states['fan.main_bedroom_fan'].attributes.speed === 'high')
                  ]]]
                icon: mdi:fan
                color: CornflowerBlue
                spin: true

      - type: horizontal-stack
        cards:

          - type: custom:button-card
            template: homekit-button
            name: Nursery Fan
            entity: fan.nursery_fan
            tap_action:
              action: call-service
              service: fan.set_speed
              service_data:
                entity_id: fan.nursery_fan
                speed: off
            icon: mdi:fan-off
            color: CornflowerBlue
          - type: custom:button-card
            template: homekit-button
            name: Nursery Fan
            entity: fan.nursery_fan
            tap_action:
              action: call-service
              service: fan.set_speed
              service_data:
                entity_id: fan.nursery_fan
                speed: low
            icon: mdi:numeric-1
            color: CornflowerBlue
            state: 
              - operator: template
                value: >
                  [[[
                    return states['fan.nursery_fan'].attributes
                    && (states['fan.nursery_fan'].attributes.speed === 'low')
                  ]]]
                icon: mdi:fan
                color: CornflowerBlue
                spin: true
          - type: custom:button-card
            template: homekit-button
            name: Nursery Fan
            entity: fan.nursery_fan
            tap_action:
              action: call-service
              service: fan.set_speed
              service_data:
                entity_id: fan.nursery_fan
                speed: medium
            icon: mdi:numeric-2
            color: CornflowerBlue
            state: 
              - operator: template
                value: >
                  [[[
                    return states['fan.nursery_fan'].attributes
                    && (states['fan.nursery_fan'].attributes.speed === 'medium')
                  ]]]
                icon: mdi:fan
                color: CornflowerBlue
                spin: true
          - type: custom:button-card
            template: homekit-button
            name: Nursery Fan
            entity: fan.nursery_fan
            tap_action:
              action: call-service
              service: fan.set_speed
              service_data:
                entity_id: fan.nursery_fan
                speed: high
            icon: mdi:numeric-3
            color: CornflowerBlue
            state: 
              - operator: template
                value: >
                  [[[
                    return states['fan.nursery_fan'].attributes
                    && (states['fan.nursery_fan'].attributes.speed === 'high')
                  ]]]
                icon: mdi:fan
                color: CornflowerBlue
                spin: true

      - type: horizontal-stack
        cards:

          - type: custom:button-card
            template: homekit-button
            name: Kitchen Fan
            entity: fan.kitchen_fan
            tap_action:
              action: call-service
              service: fan.set_speed
              service_data:
                entity_id: fan.kitchen_fan
                speed: off
            icon: mdi:fan-off
            color: CornflowerBlue
          - type: custom:button-card
            template: homekit-button
            name: Kitchen Fan
            entity: fan.kitchen_fan
            tap_action:
              action: call-service
              service: fan.set_speed
              service_data:
                entity_id: fan.kitchen_fan
                speed: low
            icon: mdi:numeric-1
            color: CornflowerBlue
            state: 
              - operator: template
                value: >
                  [[[
                    return states['fan.kitchen_fan'].attributes
                    && (states['fan.kitchen_fan'].attributes.speed === 'low')
                  ]]]
                icon: mdi:fan
                color: CornflowerBlue
                spin: true
          - type: custom:button-card
            template: homekit-button
            name: Kitchen Fan
            entity: fan.kitchen_fan
            tap_action:
              action: call-service
              service: fan.set_speed
              service_data:
                entity_id: fan.kitchen_fan
                speed: medium
            icon: mdi:numeric-2
            color: CornflowerBlue
            state: 
              - operator: template
                value: >
                  [[[
                    return states['fan.kitchen_fan'].attributes
                    && (states['fan.kitchen_fan'].attributes.speed === 'medium')
                  ]]]
                icon: mdi:fan
                color: CornflowerBlue
                spin: true
          - type: custom:button-card
            template: homekit-button
            name: Kitchen Fan
            entity: fan.kitchen_fan
            tap_action:
              action: call-service
              service: fan.set_speed
              service_data:
                entity_id: fan.kitchen_fan
                speed: high
            icon: mdi:numeric-3
            color: CornflowerBlue
            state: 
              - operator: template
                value: >
                  [[[
                    return states['fan.kitchen_fan'].attributes
                    && (states['fan.kitchen_fan'].attributes.speed === 'high')
                  ]]]
                icon: mdi:fan
                color: CornflowerBlue
                spin: true


      - type: horizontal-stack
        cards:
          - type: custom:mini-graph-card
            entities: 
              - sensor.outside_temperature
            show:
              extrema: true
              icon_adaptive_color: true
              graph: bar
            points_per_hour: 2
            color_thresholds:
              - value: -50
                color: "#FFFFFF"
              - value: 0
                color: "#1E90FF"
              - value: 18
                color: "#008000"
              - value: 28
                color: "#FFFF00"
              - value: 31
                color: "#FF8C00"
              - value: 35
                color: "#FF0000"

          - type: custom:mini-graph-card
            entities: 
              - sensor.pool_temperature
            show:
              extrema: true
              icon_adaptive_color: true
              graph: bar
            points_per_hour: 2
            color_thresholds:
              - value: -50
                color: "#FFFFFF"
              - value: 0
                color: "#1E90FF"
              - value: 28
                color: "#008000"
              - value: 32
                color: "#FF8C00"
              - value: 100
                color: "#FF0000"

      - type: horizontal-stack
        cards:
          - type: custom:mini-graph-card
            entities: 
              - sensor.lounge_temperature
            show:
              extrema: true
              icon_adaptive_color: true
              graph: bar
            points_per_hour: 2
            color_thresholds:
              - value: -50
                color: "#FFFFFF"
              - value: 0
                color: "#1E90FF"
              - value: 18
                color: "#008000"
              - value: 28
                color: "#FFFF00"
              - value: 31
                color: "#FF8C00"
              - value: 35
                color: "#FF0000"
          - type: custom:mini-graph-card
            entities: 
              - sensor.kitchen_temperature
            show:
              extrema: true
              icon_adaptive_color: true
              graph: bar
            points_per_hour: 2
            color_thresholds:
              - value: -50
                color: "#FFFFFF"
              - value: 0
                color: "#1E90FF"
              - value: 18
                color: "#008000"
              - value: 28
                color: "#FFFF00"
              - value: 31
                color: "#FF8C00"
              - value: 35
                color: "#FF0000"

      - type: horizontal-stack
        cards:

          - type: custom:mini-graph-card
            entities: 
              - sensor.main_bedroom_temperature
            show:
              extrema: true
              icon_adaptive_color: true
              graph: bar
            points_per_hour: 2
            color_thresholds:
              - value: -50
                color: "#FFFFFF"
              - value: 0
                color: "#1E90FF"
              - value: 18
                color: "#008000"
              - value: 28
                color: "#FFFF00"
              - value: 31
                color: "#FF8C00"
              - value: 35
                color: "#FF0000"

          - type: custom:mini-graph-card
            entities: 
              - sensor.nursery_temperature
            show:
              extrema: true
              icon_adaptive_color: true
              graph: bar
            points_per_hour: 2
            color_thresholds:
              - value: -50
                color: "#FFFFFF"
              - value: 0
                color: "#1E90FF"
              - value: 18
                color: "#008000"
              - value: 28
                color: "#FFFF00"
              - value: 31
                color: "#FF8C00"
              - value: 35
                color: "#FF0000"
      - type: horizontal-stack
        cards:
          - type: custom:mini-graph-card
            entities: 
              - sensor.flat_bedroom_temperature
            show:
              extrema: true
              icon_adaptive_color: true
              graph: bar
            points_per_hour: 2
            color_thresholds:
              - value: -50
                color: "#FFFFFF"
              - value: 0
                color: "#1E90FF"
              - value: 18
                color: "#008000"
              - value: 28
                color: "#FFFF00"
              - value: 31
                color: "#FF8C00"
              - value: 35
                color: "#FF0000"
          - type: "custom:button-card"
            color_type: blank-card