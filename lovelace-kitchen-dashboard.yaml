button_card_templates:
  homekit-button:
    aspect_ratio: 4/3
    hold_action:
      action: more-info
    show_label: true
    show_state: true
    state:
      - styles:
          card:
            - filter: opacity(50%)
          icon:
            - filter: grayscale(100%)
        value: 'off'
      - styles:
          card:
            - filter: opacity(30%)
          icon:
            - filter: grayscale(100%)
          state:
            - color: red
            - font-weight: bold
        value: unavailable
    styles:
      grid:
        - grid-template-areas: '"i" "l" "n" "s"'
        - grid-template-columns: 1fr
        - grid-template-rows: 1fr min-content min-content
      icon:
        - align-self: start
      img_cell:
        - justify-content: start
        - align-self: start
        - text-align: start
      label:
        - justify-self: start
        - padding-left: 10px
      name:
        - justify-self: start
        - padding-left: 10px
        - font-weight: bold
        - font-size: 12px
      state:
        - justify-self: start
        - padding-left: 11px
        - font-size: 12px
custom_header:
  exceptions:
    - conditions:
        query_string: kiosk
      config:
        kiosk_mode: true
decluttering_templates:
  tracking_picture_button:
    card:
      entity: '[[entity]]'
      entity_picture: '[[entity_picture_away]]'
      show_entity_picture: true
      show_icon: true
      show_last_changed: true
      show_name: false
      show_state: true
      state:
        - entity_picture: '[[entity_picture_home]]'
          value: home
      tap_action:
        action: more-info
      type: 'custom:button-card'
      style: |
        ha-card {
          font-family: 'Open Sans', sans-serif;
          padding-top: 15px !important;
          background-color: rgba(0, 0, 0, 0);
          -webkit-box-shadow: none;
          -moz-box-shadow: none;
          box-shadow: none;
        }
        img {
          width: 100% !important;
        }
        #img-cell {
          background-color: #F5F5F5;
          border-radius: 50px;
          height: 50px !important;
          width: 50px !important;
        }
        #state {
          padding-top: 5px;
        }

###################################################
#                                                 #
#     NEW DASHBOARD FOR SCREEN IN KITCHEN         #
#                                                 #
###################################################

title: Kitchen Views
views:

  - title: Kitchen Dashboard
    id: kitchen-dashboard
    icon: mdi:monitor-dashboard
    panel: true
    path: kitchen-dashboard

    cards:

      - type: custom:layout-card
        layout: vertical
        max_width: [27%, 27%, 46%]
        cards:
          - type: horizontal-stack
            cards:
              - type: custom:decluttering-card
                template: tracking_picture_button
                variables:
                  - entity: device_tracker.life360_greg
                  - entity_picture_away: /local/images/Greg-Away.jpg
                  - entity_picture_home: /local/images/Greg-Home.jpg
              - type: custom:decluttering-card
                template: tracking_picture_button
                variables:
                  - entity: device_tracker.life360_jenny
                  - entity_picture_away: /local/images/Jenny-Away.jpg
                  - entity_picture_home: /local/images/Jenny-Home.jpg
              - type: custom:decluttering-card
                template: tracking_picture_button
                variables:
                  - entity: device_tracker.life360_lynne
                  - entity_picture_away: /local/images/Lynne-Away.png
                  - entity_picture_home: /local/images/Lynne-Home.png
              - type: custom:decluttering-card
                template: tracking_picture_button
                variables:
                  - entity: device_tracker.life360_sally
                  - entity_picture_away: /local/images/Sally-Away.png
                  - entity_picture_home: /local/images/Sally-Home.png

          - type: picture-elements    
            image: /local/images/clock-bg-trans.png
            elements:      
              - type: state-label
                entity: sensor.time
                style:
                  top: 40%
                  left: 50%
                  font-size: 4vw
                  color: white

              - type: state-label
                entity: sensor.date
                style:
                  top: 80%
                  left: 50%
                  font-size: 1.5vw
                  color: CornflowerBlue

            style: |
              ha-card {
                margin-top: 40px;
                margin-bottom: 30px;
                background-color: rgba(0, 0, 0, 0);
                font-family: 'Open Sans', sans-serif;
                font-size: 200%;
                -webkit-box-shadow: none;
                -moz-box-shadow: none;
                box-shadow: none;
                text-align: center;
              }
              h1, h3 {
                font-weight: 300 !important;
              }

          - type: glance
            entities:
              - entity: sensor.south_africa_coronavirus_confirmed
                name: SA Confirmed
              - entity: sensor.south_africa_coronavirus_current
                name: SA Current
              - entity: sensor.south_africa_coronavirus_deaths
                name: SA Deaths
              - entity: sensor.south_africa_coronavirus_recovered
                name: SA Recovered
            show_icon: false
            show_name: true
            show_state: true
            
          - type: glance
            entities:
              - entity: sensor.worldwide_coronavirus_confirmed
                name: WW Confirmed
              - entity: sensor.worldwide_coronavirus_current
                name: WW Current
              - entity: sensor.worldwide_coronavirus_deaths
                name: WW Deaths
              - entity: sensor.worldwide_coronavirus_recovered
                name: WW Recovered
            show_icon: false
            show_name: true
            show_state: true
            

          - type: "custom:atomic-calendar"
            title: "Upcoming Events"
            titleSize: 110
            dateSize: 80
            timeSize: 80
            locationTextSize: 80
            entities:           
              - entity: calendar.greg_personal_gmail
                titleColor: dodgerblue
              - entity: calendar.wrench_jenny_gmail_com
                titleColor: darkorange
              - entity: calendar.sarah_personal
                titleColor: pink
              - entity: calendar.holidays_in_south_africa
                titleColor: green
              - entity: calendar.meal_plan
                titleColor: MediumOrchid
              - entity: calendar.family
                titleColor: HotPink
            locationIconColor: 'rgb(230, 124, 115)'
            timeColor: silver
            showProgressBar: false
            style: |
              ha-card {
                background-color: rgba(0, 0, 0, 0);
                -webkit-box-shadow: none;
                -moz-box-shadow: none;
                box-shadow: none;
              }

          - break

          - type: custom:weather-card
            entity: weather.dark_sky
            icons: "/local/custom-lovelace/weather-card/icons/"
            style: |
              ha-card {
                background-color: rgba(0, 0, 0, 0);
                -webkit-box-shadow: none;
                -moz-box-shadow: none;
                box-shadow: none;
              }




          - type: horizontal-stack
            cards:
              - type: "custom:keep-notes-card"
                entity: sensor.keep_shopping_list
                showChecked: false
              # - type: "custom:google-keep-card"
              #   entity: sensor.google_keep_c6fe53a582
              #   theme: dark
              #   show:
              #     - unchecked
                # style: |
                #   ha-card {
                #     background-color: rgba(0, 0, 0, 0);
                #     -webkit-box-shadow: none;
                #     -moz-box-shadow: none;
                #     box-shadow: none;
                #   }


              - type: vertical-stack
                cards:

                  - type: horizontal-stack
                    cards:
                      # - type: "custom:button-card"
                      #   template: homekit-button
                      #   entity: binary_sensor.protection_window
                      #   state: 
                      #     - value: 'On'
                      #       color: '#EF6C00'
                      - type: "custom:button-card"
                        template: homekit-button
                        entity: sensor.current_uv_level
                        state:
                          - value: 'Low'
                            color: '#558B2F'
                          - value: 'Moderate'
                            color: '#F9A825'
                          - value: 'High'
                            color: '#EF6C00'
                          - value: 'Very High'
                            color: '#B71C1C'
                          - value: 'Extreme'
                            color: '#6A1B9A'
                      - type: "custom:button-card"
                        template: homekit-button
                        entity: sensor.skin_type_1_safe_exposure_time
                        
                  - type: horizontal-stack
                    cards:

                      - type: custom:mini-graph-card
                        name: Outside
                        entities: 
                          - entity: sensor.outside_temperature
                            index: 0
                        show:
                          extrema: true
                          icon_adaptive_color: true
                          graph: line
                        points_per_hour: 2
                        color_thresholds:
                          - color: '#FF0000'
                            value: 100
                          - color: '#FF8C00'
                            value: 31
                          - color: '#008000'
                            value: 28
                          - color: '#1E90FF'
                            value: 18
                          - color: '#FFFFFF'
                            value: 0

                      - type: custom:mini-graph-card
                        name: Pool
                        entities:
                          - entity: sensor.pool_temperature
                            index: 0
                        show:
                          extrema: true
                          icon_adaptive_color: true
                          graph: line
                        points_per_hour: 2
                        color_thresholds:
                          - color: '#FF0000'
                            value: 100
                          - color: '#FF8C00'
                            value: 33
                          - color: '#008000'
                            value: 31
                          - color: '#1E90FF'
                            value: 27
                          - color: '#FFFFFF'
                            value: 10

                  - type: horizontal-stack
                    cards:
                      - type: 'custom:button-card'
                        template: homekit-button
                        entity: sensor.kitchen_temperature
                        styles:
                          icon:
                            - color: |
                                [[[
                                  if (entity.state < 1) return '#FFFFFF';
                                  if (entity.state >= 1 && entity.state < 18) return '#1E90FF';
                                  if (entity.state >= 18 && entity.state < 28) return '#008000';
                                  if (entity.state >= 28 && entity.state < 31) return '#FF8C00';
                                  if (entity.state <= 31) return '#FF0000';
                                  else return 'gray';
                                ]]]
                          state:
                            - font-size: 30px
                        
                        
                      - type: 'custom:button-card'
                        template: homekit-button
                        entity: sensor.main_bedroom_temperature
                        styles:
                          icon:
                            - color: |
                                [[[
                                  if (entity.state < 1) return '#FFFFFF';
                                  if (entity.state >= 1 && entity.state < 18) return '#1E90FF';
                                  if (entity.state >= 18 && entity.state < 28) return '#008000';
                                  if (entity.state >= 28 && entity.state < 31) return '#FF8C00';
                                  if (entity.state <= 31) return '#FF0000';
                                  else return 'gray';
                                ]]]
                          state:
                            - font-size: 30px
                        
                        
                  - type: horizontal-stack
                    cards:
                      - type: 'custom:button-card'
                        template: homekit-button
                        entity: sensor.nursery_temperature
                        styles:
                          icon:
                            - color: |
                                [[[
                                  if (entity.state < 1) return '#FFFFFF';
                                  if (entity.state >= 1 && entity.state < 18) return '#1E90FF';
                                  if (entity.state >= 18 && entity.state < 28) return '#008000';
                                  if (entity.state >= 28 && entity.state < 31) return '#FF8C00';
                                  if (entity.state <= 31) return '#FF0000';
                                  else return 'gray';
                                ]]]
                          state:
                            - font-size: 30px
                        template: homekit-button
                        
                      - type: 'custom:button-card'
                        template: homekit-button
                        entity: sensor.flat_bedroom_temperature
                        styles:
                          icon:
                            - color: |
                                [[[
                                  if (entity.state < 1) return '#FFFFFF';
                                  if (entity.state >= 1 && entity.state < 18) return '#1E90FF';
                                  if (entity.state >= 18 && entity.state < 28) return '#008000';
                                  if (entity.state >= 28 && entity.state < 31) return '#FF8C00';
                                  if (entity.state <= 31) return '#FF0000';
                                  else return 'gray';
                                ]]]
                          state:
                            - font-size: 30px
                    


                  
          - break

          - type: picture-entity
            entity: camera.driveway_gate
            camera_view: live
            show_name: false
            show_state: false


          - type: horizontal-stack
            cards:
              - type: vertical-stack
                cards:
                  - type: horizontal-stack
                    cards:
                      - type: "custom:button-card"
                        entity: binary_sensor.driveway_gate
                        template: homekit-button
                        icon: mdi:gate
                        state:
                          - value: 'on'
                            color: Red
                          - value: 'Closed'
                            color: Green
                      - type: "custom:button-card"
                        entity: binary_sensor.pool_gate
                        template: homekit-button
                        icon: mdi:gate
                        state:
                          - value: 'on'
                            color: Red
                      - type: custom:button-card
                        entity: switch.pool_pump
                        template: homekit-button
                        state:
                          - value: 'on'
                            color: CornflowerBlue
                  - type: horizontal-stack
                    cards:
                      - type: "custom:button-card"
                        entity: binary_sensor.front_door
                        template: homekit-button
                        icon: mdi:door-closed
                        state:
                          - value: 'on'
                            color: Red
                            icon: mdi:door-open
                      - type: "custom:button-card"
                        entity: binary_sensor.kitchen_door
                        template: homekit-button
                        icon: mdi:door-closed
                        state:
                          - value: 'on'
                            color: Red
                            icon: mdi:door-open
                      - type: "custom:button-card"
                        entity: binary_sensor.bedroom_french_door
                        template: homekit-button
                        icon: mdi:door-closed
                        state:
                          - value: 'on'
                            color: Red
                            icon: mdi:door-open
                  - type: horizontal-stack
                    cards:
                      - type: "custom:button-card"
                        entity: switch.nursery_heater
                        template: homekit-button
                        state:
                          - value: 'on'
                            color: Orange
                      - type: "custom:button-card"
                        entity: switch.flat_bedroom_heater
                        name: Flat Heater
                        template: homekit-button
                        state:
                          - value: 'on'
                            color: Orange
                      - type: custom:button-card
                        color_type: blank-card

                  - type: horizontal-stack
                    cards:
                      - type: custom:button-card
                        template: homekit-button
                        name: Lounge Fan 1
                        entity: fan.lounge_fan_1
                        show_label: true
                        tap_action:
                          action: more-info
                        icon: mdi:fan-off    
                        state: 
                          - operator: template
                            value: >
                              [[[
                                return states['fan.lounge_fan_1'].attributes
                                && (states['fan.lounge_fan_1'].attributes.speed === 'low')
                              ]]]
                            icon: mdi:fan
                            color: CornflowerBlue
                            # spin: true
                            label: Low           
                          - operator: template
                            value: >
                              [[[
                                return states['fan.lounge_fan_1'].attributes
                                && (states['fan.lounge_fan_1'].attributes.speed === 'medium')
                              ]]]
                            icon: mdi:fan
                            color: CornflowerBlue
                            # spin: true
                            label: Medium
                    
                          - operator: template
                            value: >
                              [[[
                                return states['fan.lounge_fan_1'].attributes
                                && (states['fan.lounge_fan_1'].attributes.speed === 'high')
                              ]]]
                            icon: mdi:fan
                            color: CornflowerBlue
                            # spin: true
                            label: High
                      - type: custom:button-card
                        template: homekit-button
                        name: Lounge Fan 2
                        entity: fan.lounge_fan_2
                        show_label: true
                        tap_action:
                          action: more-info
                        icon: mdi:fan-off    
                        state: 
                          - operator: template
                            value: >
                              [[[
                                return states['fan.lounge_fan_2'].attributes
                                && (states['fan.lounge_fan_2'].attributes.speed === 'low')
                              ]]]
                            icon: mdi:fan
                            color: CornflowerBlue
                            # spin: true
                            label: Low           
                          - operator: template
                            value: >
                              [[[
                                return states['fan.lounge_fan_2'].attributes
                                && (states['fan.lounge_fan_2'].attributes.speed === 'medium')
                              ]]]
                            icon: mdi:fan
                            color: CornflowerBlue
                            # spin: true
                            label: Medium
                    
                          - operator: template
                            value: >
                              [[[
                                return states['fan.lounge_fan_2'].attributes
                                && (states['fan.lounge_fan_2'].attributes.speed === 'high')
                              ]]]
                            icon: mdi:fan
                            color: CornflowerBlue
                            # spin: true
                            label: High
                      - type: custom:button-card
                        template: homekit-button
                        name: Kitchen Fan
                        entity: fan.kitchen_fan
                        show_label: true
                        tap_action:
                          action: more-info
                        icon: mdi:fan-off    
                        state: 
                          - operator: template
                            value: >
                              [[[
                                return states['fan.kitchen_fan'].attributes
                                && (states['fan.kitchen_fan'].attributes.speed === 'low')
                              ]]]
                            icon: mdi:fan
                            color: CornflowerBlue
                            # spin: true
                            label: Low           
                          - operator: template
                            value: >
                              [[[
                                return states['fan.kitchen_fan'].attributes
                                && (states['fan.kitchen_fan'].attributes.speed === 'medium')
                              ]]]
                            icon: mdi:fan
                            color: CornflowerBlue
                            # spin: true
                            label: Medium
                    
                          - operator: template
                            value: >
                              [[[
                                return states['fan.kitchen_fan'].attributes
                                && (states['fan.kitchen_fan'].attributes.speed === 'high')
                              ]]]
                            icon: mdi:fan
                            color: CornflowerBlue
                            # spin: true
                            label: High



                  - type: horizontal-stack
                    cards:
                      - type: custom:button-card
                        template: homekit-button
                        name: Main Bedroom Fan
                        entity: fan.main_bedroom_fan
                        show_label: true
                        tap_action:
                          action: more-info
                        icon: mdi:fan-off    
                        state: 
                          - operator: template
                            value: >
                              [[[
                                return states['fan.main_bedroom_fan'].attributes
                                && (states['fan.main_bedroom_fan'].attributes.speed === 'low')
                              ]]]
                            icon: mdi:fan
                            color: CornflowerBlue
                            # spin: true
                            label: Low
                          - operator: template
                            value: >
                              [[[
                                return states['fan.main_bedroom_fan'].attributes
                                && (states['fan.main_bedroom_fan'].attributes.speed === 'medium')
                              ]]]
                            icon: mdi:fan
                            color: CornflowerBlue
                            # spin: true
                            label: Medium
                    
                          - operator: template
                            value: >
                              [[[
                                return states['fan.main_bedroom_fan'].attributes
                                && (states['fan.main_bedroom_fan'].attributes.speed === 'high')
                              ]]]
                            icon: mdi:fan
                            color: CornflowerBlue
                            # spin: true
                            label: High
                      - type: custom:button-card
                        template: homekit-button
                        name: Nursery Fan
                        entity: fan.nursery_fan
                        show_label: true
                        tap_action:
                          action: more-info
                        icon: mdi:fan-off    
                        state: 
                          - operator: template
                            value: >
                              [[[
                                return states['fan.nursery_fan'].attributes
                                && (states['fan.nursery_fan'].attributes.speed === 'low')
                              ]]]
                            icon: mdi:fan
                            color: CornflowerBlue
                            # spin: true
                            label: Low           
                          - operator: template
                            value: >
                              [[[
                                return states['fan.nursery_fan'].attributes
                                && (states['fan.nursery_fan'].attributes.speed === 'medium')
                              ]]]
                            icon: mdi:fan
                            color: CornflowerBlue
                            # spin: true
                            label: Medium
                    
                          - operator: template
                            value: >
                              [[[
                                return states['fan.nursery_fan'].attributes
                                && (states['fan.nursery_fan'].attributes.speed === 'high')
                              ]]]
                            icon: mdi:fan
                            color: CornflowerBlue
                            # spin: true
                            label: High
                      - type: custom:button-card
                        color_type: blank-card

              - type: vertical-stack
                cards:
                  - type: horizontal-stack
                    cards:
                      - type: custom:button-card
                        entity: light.all_outside_lights
                        template: homekit-button
                      - type: "custom:button-card"
                        entity: light.tasmota_desk_lamp
                        template: homekit-button
                      - type: "custom:button-card"
                        entity: light.tv_led
                        template: homekit-button
                        state:
                          - value: 'on'
                            color: auto 

                  - type: horizontal-stack
                    cards:
                      - type: "custom:button-card"
                        entity: light.lounge_light_1
                        template: homekit-button
                      - type: "custom:button-card"
                        entity: light.lounge_light_2
                        template: homekit-button
                      - type: "custom:button-card"
                        entity: light.lounge_lamp
                        template: homekit-button

                  - type: horizontal-stack
                    cards:
                      - type: "custom:button-card"
                        entity: light.main_bedroom_light
                        template: homekit-button
                      - type: custom:button-card
                        color_type: blank-card
                      - type: custom:button-card
                        color_type: blank-card

                  - type: horizontal-stack
                    cards:
                      - type: "custom:button-card"
                        entity: light.nursery_light
                        template: homekit-button
                      - type: "custom:button-card"
                        entity: light.nursery_lamp
                        template: homekit-button
                      - type: "custom:button-card"
                        entity: light.nursery_led
                        template: homekit-button
                        state:
                          - value: 'on'
                            color: auto 
                        tap_action:
                          action: more-info


                  - type: horizontal-stack
                    cards:
                      - type: "custom:button-card"
                        entity: light.kitchen_light
                        template: homekit-button
                      - type: "custom:button-card"
                        entity: light.kitchen_led
                        template: homekit-button
                        state:
                          - value: 'on'
                            color: white
                      - type: custom:button-card
                        color_type: blank-card
